{% extends 'base_app.html.twig' %}

{% block title %}CarsFleet - Cars{% endblock %}

{% block javascripts %}
    {{ parent() }}
    {{ encore_entry_script_tags('search') }}
{% endblock %}

{% import 'car/detail_side_over.html.twig' as element %}

{% block body %}
<div class="container mx-auto p-4 shadow rounded-xl">
    <h2 class="text-body-lg font-semibold mb-5">
        Filtrer les voitures
    </h2>
    <div class="md:flex">

        {{ form_start(form) }}
            {{ form_row(form.from) }}
            {{ form_row(form.to) }}
            {{ form_row(form.gearbox) }}
            <button type="submit" class="transform hover:scale-110 transition-transform duration-200
            hover:bg-neutral-800 text-body-sm font-semibold text-white bg-neutral-900
            pl-5 pr-4 px-4 py-3 rounded-xl flex flex-row gap-1 items-center justify-center">
                Rechercher
            </button>
        {{ form_end(form) }}

        <div class="flex-1 px-6 pb-6 text-medium dark:text-gray-400 dark:bg-gray-800 rounded-xl w-full">
            <h1 class="text-display-xs font-semibold">
                Voitures du site :
                <span class="bg-neutral-500 text-neutral-50 text-sm font-medium me-2 px-2.5 py-0.5
                rounded-2xl ring-1 ring-inset ring-neutral-900/20">{{ cars.getTotalItemCount }}</span>
            </h1>
            <div class="sm:mx-auto sm:w-full sm:max-w-5xl">
                <div class="mt-5 grid grid-cols-1 gap-x-6 gap-y-6 sm:grid-cols-3">
                    {% for car in cars %}
                    <div>
                        <div class="w-full max-w-sm bg-white border border-gray-200 rounded-xl shadow-2xl dark:bg-gray-800 dark:border-gray-700">
                            <div class="flex flex-col items-center pb-5 mt-10">
                                <h5 class="mb-1 text-xl font-medium text-gray-900 dark:text-white"> {{ car.brand }} - {{ car.model }}</h5>
                                <span class="text-sm text-gray-500 dark:text-gray-400">Nombre de passager: {{ car.passengerQuantity }}</span>
                                <span class="w-10 h-10 rounded-xl my-5 border-2 border-neutral-200" style="background-color: {{ car.color }}"></span>
                                <div class="flex md:flex-col lg:flex-row mt-4 md:mt-6 md:gap-4 gap-1">
                                    <button data-drawer-target="drawer-navigation-{{ car.id }}"
                                       data-drawer-show="drawer-navigation-{{ car.id }}"
                                       aria-controls="drawer-navigation-{{ car.id }}"
                                       class="transform hover:scale-110 transition-transform duration-200 hover:bg-neutral-800 text-body-sm font-semibold text-white bg-neutral-900 pl-5 pr-4 px-4 py-3 rounded-xl flex flex-row gap-1 items-center justify-center">
                                        <svg xmlns="http://www.w3.org/2000/svg"
                                             fill="none" viewBox="0 0 24 24"
                                             stroke-width="1.5"
                                             stroke="currentColor"
                                             class="size-5">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"></path>
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"></path>
                                        </svg>
                                        Consulter
                                    </button>

                                    <a href="{{ path('app_borrow_index', {'id': car.id }) }}"
                                       class="transform hover:scale-110 transition-transform duration-200 text-body-sm font-semibold text-gray-900 bg-white border border-gray-300 focus:outline-none hover:bg-gray-100 hover:underline pl-5 pr-4 px-4 py-3 rounded-xl flex flex-row gap-1 items-center justify-center">
                                        <svg xmlns="http://www.w3.org/2000/svg"
                                             class="size-5"
                                             width="24"
                                             height="24"
                                             viewBox="0 0 24 24"
                                             stroke-width="2"
                                             stroke="currentColor"
                                             fill="none"
                                             stroke-linecap="round"
                                             stroke-linejoin="round">
                                            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                            <path d="M7 17m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"></path>
                                            <path d="M17 17m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"></path>
                                            <path d="M5 17h-2v-6l2 -5h9l4 5h1a2 2 0 0 1 2 2v4h-2m-4 0h-6m-6 -6h15m-6 0v-5"></path>
                                        </svg>
                                        Emprunter
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    {{ element.sideBar(car) }}
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</div>
    {{ knp_pagination_render(cars) }}
{% endblock %}